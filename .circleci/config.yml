version: 2.1
orbs:
  win: circleci/windows@5.0
jobs:
  pre:
    executor: win/default
    steps:
      - run: dotnet tool install --global PowerShell
  build:
    docker:
      - image: cristircr/selenium:latest
    steps:
      - checkout
      - run:
          name: Run Selenium Tests
          command: |
           dotnet restore
           msbuild
           dotnet "bin/Debug/BehavioursIntegrationConnectGOOGLE.dll" --filter "CBT_NUnit.CBTAPI.Initialize"
      - store_artifacts:
          path: bin/Release
          destination: .circleci

services:
  mcr.microsoft.com/dotnet/framework/sdk:4.8:
  mcr.microsoft.com/dotnet/framework/aspnet:4.8:
    build: .
    depends_on:
      - mcr.microsoft.com/dotnet/framework/sdk:4.8
 
workflows:
  version: 2
  full:
    jobs:
      - pre
      - build:
          requires:
            - pre